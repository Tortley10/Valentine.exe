<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yippee</title>
    <link rel="stylesheet" href="styles/yes_style.css">
</head>
<body>
    <div class="container">
        <h1 class="header_text">I Knew you would say yes!</h1>
        <h2 class="subtitle_text">Happy Valentines Day :]</h2>
        <p>Enjoy the music :D</p>
        <div class="audio-player">
            <audio id="backgroundMusic" controls autoplay>
                <source src="audio/sinatra.mp3" type="audio/mpeg">
            </audio>
        </div>
        <p class="ending">Ending 1/7: Acceptance</p>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const audio = document.getElementById("backgroundMusic");

            function tryPlay() {
                audio.play().then(() => {
                    console.log("Autoplay successful.");
                }).catch(() => {
                    console.warn("Autoplay blocked. Adding event listener.");
                    document.body.addEventListener("click", () => audio.play(), { once: true });
                });
            }

            // Try to play when the page is visible
            if (document.visibilityState === "visible") {
                tryPlay();
            } else {
                document.addEventListener("visibilitychange", function () {
                    if (document.visibilityState === "visible") {
                        tryPlay();
                    }
                }, { once: true });
            }
        });
    </script>
</body>
</html>